

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>APDL Conversion Examples &mdash; pyansys 0.38.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ANSYS APDL Interactive Control Examples" href="ansys_examples.html" />
    <link rel="prev" title="ANSYS Functions" href="ansys_functions.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> pyansys
          

          
          </a>

          
            
            
              <div class="version">
                0.38.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">APDL Python Scripting</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ansys_control.html">ANSYS APDL Interactive Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="ansys_functions.html">ANSYS Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="ansys_functions.html#available-commands">Available Commands</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">APDL Conversion Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#vm1-statically-indeterminate-reaction-force-analysis">VM1 - Statically Indeterminate Reaction Force Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vm7-plastic-compression-of-a-pipe-assembly">VM7 - Plastic Compression of a Pipe Assembly</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ansys_examples.html">ANSYS APDL Interactive Control Examples</a></li>
</ul>
<p class="caption"><span class="caption-text">File IO and Visualization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ansys_write_archive.html">Reading and Writing ANSYS Archives</a></li>
<li class="toctree-l1"><a class="reference internal" href="loading_results.html">Working with a ANSYS Result File (rst)</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Archive and Result File Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="loading_km.html">Working with a ANSYS Full File (full)</a></li>
<li class="toctree-l1"><a class="reference internal" href="loading_emat.html">Working with a ANSYS Element Matrix File (*.emat)</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/index.html">Result Visulization Gallery</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pyansys</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>APDL Conversion Examples</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/apdl_conversion.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="apdl-conversion-examples">
<h1>APDL Conversion Examples<a class="headerlink" href="#apdl-conversion-examples" title="Permalink to this headline">¶</a></h1>
<p>ANSYS APDL contains over 200 verification files used for ANSYS validation and demonstration.  These validation files are used here to demo the use of the <code class="docutils literal notranslate"><span class="pre">pyansys</span></code> file translator <code class="docutils literal notranslate"><span class="pre">pyansys.convert_script</span></code>.</p>
<p>Of particular note in the following examples is how most of the commands can be called as a method to the ansys object rather than sending a string as a command.  Additionally, take note that some commands require the <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">ansys.non_interactive:</span></code> directive since some commands require and will break the CORBA server connection.  Also note that APDL macros that use <code class="docutils literal notranslate"><span class="pre">*CREATE</span></code> have been replaced with a python function.  This will make the code easier to debug should it be necessary to insert a break point in the code.</p>
<p>Ideally, all math and variable setting would take place within Python as much as possible as APDL math is much less transparent and more difficult to debug.  These examples only show an automatic translation of a verification file and not optimized code.  Should it be necessary to pull parameters or arrays from ansys, use the <code class="docutils literal notranslate"><span class="pre">*GET</span></code> command in conjunction with <code class="docutils literal notranslate"><span class="pre">ansys.load_parameters</span></code>.  For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ansys</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s1">&#39;DEF_Y&#39;</span><span class="p">,</span> <span class="s1">&#39;NODE&#39;</span> <span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;U&#39;</span> <span class="p">,</span><span class="s1">&#39;Y&#39;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">load_parameters</span><span class="p">()</span>
</pre></div>
</div>
<p>The parameters are now acessable within the <code class="docutils literal notranslate"><span class="pre">ANSYS</span></code> object:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ansys</span><span class="o">.</span><span class="n">parameters</span>
<span class="go">{&#39;AAS_MAPD&#39;: 1.0,</span>
<span class="go"> &#39;DEF_X&#39;: 8.631926066372,</span>
<span class="go"> &#39;DEF_Y&#39;: 4.532094298033,</span>
<span class="go"> &#39;ST_EN&#39;: 24.01187254488,</span>
<span class="go"> &#39;_RETURN&#39;: 0.0,</span>
<span class="go"> &#39;_STATUS&#39;: 1.0}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">ansys</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;DEF_Y&#39;</span><span class="p">]</span>
<span class="go">4.532094298033</span>
</pre></div>
</div>
<div class="section" id="vm1-statically-indeterminate-reaction-force-analysis">
<h2>VM1 - Statically Indeterminate Reaction Force Analysis<a class="headerlink" href="#vm1-statically-indeterminate-reaction-force-analysis" title="Permalink to this headline">¶</a></h2>
<p>HTML overview <a class="reference external" href="https://www.sharcnet.ca/Software/Ansys/17.0/en-us/help/ans_vm/Hlp_V_VM1.html">VM1</a></p>
<p>ANSYS APDL code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/COM,ANSYS MEDIA REL. 150 (11/8/2013) REF. VERIF. MANUAL: REL. 150
/VERIFY,VM1
/PREP7
/TITLE, VM1, STATICALLY INDETERMINATE REACTION FORCE ANALYSIS
C***      STR. OF MATL., TIMOSHENKO, PART 1, 3RD ED., PAGE 26, PROB.10
ANTYPE,STATIC                  ! STATIC ANALYSIS
ET,1,LINK180
SECTYPE,1,LINK
SECDATA,1                          ! CROSS SECTIONAL AREA (ARBITRARY) = 1
MP,EX,1,30E6
N,1
N,2,,4
N,3,,7
N,4,,10
E,1,2                          ! DEFINE ELEMENTS
EGEN,3,1,1
D,1,ALL,,,4,3                  ! BOUNDARY CONDITIONS AND LOADING
F,2,FY,-500
F,3,FY,-1000
FINISH
/SOLU
OUTPR,BASIC,1
OUTPR,NLOAD,1
SOLVE
FINISH
/POST1
NSEL,S,LOC,Y,10
FSUM
*GET,REAC_1,FSUM,,ITEM,FY
NSEL,S,LOC,Y,0
FSUM
*GET,REAC_2,FSUM,,ITEM,FY

*DIM,LABEL,CHAR,2
*DIM,VALUE,,2,3
LABEL(1) = &#39;R1, lb&#39;,&#39;R2, lb &#39;
*VFILL,VALUE(1,1),DATA,900.0,600.0
*VFILL,VALUE(1,2),DATA,ABS(REAC_1),ABS(REAC_2)
*VFILL,VALUE(1,3),DATA,ABS(REAC_1 / 900) ,ABS( REAC_2 / 600)
/OUT,vm1,vrt
/COM
/COM,------------------- VM1 RESULTS COMPARISON ---------------------
/COM,
/COM,         |   TARGET   |   Mechanical APDL   |   RATIO
/COM,
*VWRITE,LABEL(1),VALUE(1,1),VALUE(1,2),VALUE(1,3)
(1X,A8,&#39;   &#39;,F10.1,&#39;  &#39;,F10.1,&#39;   &#39;,1F5.3)
/COM,----------------------------------------------------------------
/OUT
FINISH
*LIST,vm1,vrt
</pre></div>
</div>
<p>This verification file was translated using:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyansys</span>
<span class="n">pyansys</span><span class="o">.</span><span class="n">convert_script</span><span class="p">(</span><span class="s1">&#39;vm1.dat&#39;</span><span class="p">,</span> <span class="s1">&#39;vm1.py&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Translated code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot; Script generated by pyansys version 0.30.1&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">pyansys</span>
<span class="n">ansys</span> <span class="o">=</span> <span class="n">pyansys</span><span class="o">.</span><span class="n">ANSYS</span><span class="p">(</span><span class="s2">&quot;/usr/ansys_inc/v182/ansys/bin/ansys182&quot;</span><span class="p">,</span> <span class="n">loglevel</span><span class="o">=</span><span class="s2">&quot;INFO&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/COM,ANSYS MEDIA REL. 150 (11/8/2013) REF. VERIF. MANUAL: REL. 150&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/VERIFY,VM1&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/PREP7&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/TITLE, VM1, STATICALLY INDETERMINATE REACTION FORCE ANALYSIS&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;C***      STR. OF MATL., TIMOSHENKO, PART 1, 3RD ED., PAGE 26, PROB.10&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Antype</span><span class="p">(</span><span class="s2">&quot;STATIC&quot;</span><span class="p">)</span>  <span class="c1">#STATIC ANALYSIS</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Et</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;LINK180&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Sectype</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;LINK&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Secdata</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1">#CROSS SECTIONAL AREA (ARBITRARY) = 1</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Mp</span><span class="p">(</span><span class="s2">&quot;EX&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">30E6</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">N</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">N</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">N</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">N</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">E</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1">#DEFINE ELEMENTS</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Egen</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">D</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;ALL&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1">#BOUNDARY CONDITIONS AND LOADING</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">F</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;FY&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">500</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">F</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;FY&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Finish</span><span class="p">()</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/SOLU&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Outpr</span><span class="p">(</span><span class="s2">&quot;BASIC&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Outpr</span><span class="p">(</span><span class="s2">&quot;NLOAD&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Solve</span><span class="p">()</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Finish</span><span class="p">()</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/POST1&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Nsel</span><span class="p">(</span><span class="s2">&quot;S&quot;</span><span class="p">,</span> <span class="s2">&quot;LOC&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Fsum</span><span class="p">()</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*GET,REAC_1,FSUM,,ITEM,FY&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Nsel</span><span class="p">(</span><span class="s2">&quot;S&quot;</span><span class="p">,</span> <span class="s2">&quot;LOC&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Fsum</span><span class="p">()</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*GET,REAC_2,FSUM,,ITEM,FY&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*DIM,LABEL,CHAR,2&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*DIM,VALUE,,2,3&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;LABEL(1) = &#39;R1, lb&#39;,&#39;R2, lb &#39;&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*VFILL,VALUE(1,1),DATA,900.0,600.0&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*VFILL,VALUE(1,2),DATA,ABS(REAC_1),ABS(REAC_2)&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*VFILL,VALUE(1,3),DATA,ABS(REAC_1 / 900) ,ABS( REAC_2 / 600)&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/OUT,vm1,vrt&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/COM&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/COM,------------------- VM1 RESULTS COMPARISON ---------------------&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/COM,&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/COM,         |   TARGET   |   Mechanical APDL   |   RATIO&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/COM,&quot;</span><span class="p">)</span>
<span class="k">with</span> <span class="n">ansys</span><span class="o">.</span><span class="n">non_interactive</span><span class="p">:</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*VWRITE,LABEL(1),VALUE(1,1),VALUE(1,2),VALUE(1,3)&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;(1X,A8,&#39;   &#39;,F10.1,&#39;  &#39;,F10.1,&#39;   &#39;,1F5.3)&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/COM,----------------------------------------------------------------&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/OUT&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Finish</span><span class="p">()</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*LIST,vm1,vrt&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Exit</span><span class="p">()</span>
</pre></div>
</div>
<p>Results from running the converted file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2018</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">20</span> <span class="mi">23</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mi">35</span><span class="p">,</span><span class="mi">022</span> <span class="p">[</span><span class="n">INFO</span><span class="p">]</span> <span class="n">pyansys</span><span class="o">.</span><span class="n">ansys</span><span class="p">:</span>
<span class="o">-------------------</span> <span class="n">VM1</span> <span class="n">RESULTS</span> <span class="n">COMPARISON</span> <span class="o">---------------------</span>
<span class="o">|</span>   <span class="n">TARGET</span>   <span class="o">|</span>   <span class="n">Mechanical</span> <span class="n">APDL</span>   <span class="o">|</span>   <span class="n">RATIO</span>
<span class="o">/</span><span class="n">INPUT</span> <span class="n">FILE</span><span class="o">=</span>    <span class="n">LINE</span><span class="o">=</span>       <span class="mi">0</span>
<span class="n">R1</span><span class="p">,</span> <span class="n">lb</span>          <span class="mf">900.0</span>       <span class="mf">900.0</span>   <span class="mf">1.000</span>
<span class="n">R2</span><span class="p">,</span> <span class="n">lb</span>          <span class="mf">600.0</span>       <span class="mf">600.0</span>   <span class="mf">1.000</span>
<span class="o">----------------------------------------------------------------</span>
</pre></div>
</div>
</div>
<div class="section" id="vm7-plastic-compression-of-a-pipe-assembly">
<h2>VM7 - Plastic Compression of a Pipe Assembly<a class="headerlink" href="#vm7-plastic-compression-of-a-pipe-assembly" title="Permalink to this headline">¶</a></h2>
<p>HTML overview <a class="reference external" href="https://www.sharcnet.ca/Software/Ansys/17.0/en-us/help/ans_vm/Hlp_V_VM7.html">VM7</a></p>
<p>ANSYS APDL code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/COM,ANSYS MEDIA REL. 150 (11/8/2013) REF. VERIF. MANUAL: REL. 150
/VERIFY,VM7
/PREP7
/TITLE, VM7, PLASTIC COMPRESSION OF A PIPE ASSEMBLY
C***          MECHANICS OF SOLIDS, CRANDALL AND DAHL, 1959, PAGE 180, EX. 5.1
C***          USING PIPE288, SOLID185 AND SHELL181 ELEMENTS
THETA=6                              ! SUBTENDED ANGLE
ET,1,PIPE288,,,,2
ET,2,SOLID185
ET,3,SHELL181,,,2                    ! FULL INTEGRATION
SECTYPE,1,SHELL
SECDATA,0.5,1,0,5                      ! THICKNESS (SHELL181)
SECTYPE,2,SHELL
SECDATA,0.5,2,0,5                      ! THICKNESS (SHELL181)
SECTYPE,3,PIPE
SECDATA,4.9563384,0.5                ! OUTSIDE DIA. AND WALL THICKNESS FOR INSIDE TUBE (PIPE288)
SECTYPE,4,PIPE
SECDATA,8.139437,0.5                 ! OUTSIDE DIA. AND WALL THICKNESS FOR OUTSIDE TUBE (PIPE288)
MP,EX  ,1,26.875E6                   ! STEEL
MP,PRXY,1,0.3
MP,EX  ,2,11E6                       ! ALUMINUM
MP,PRXY,2,0.3
TB,BKIN,1,1                          ! DEFINE NON-LINEAR MATERIAL PROPERTY FOR STEEL
TBTEMP,0
TBDATA,1,86000,0
TB,BKIN,2,1                          ! DEFINE NON-LINEAR MATERIAL PROPERTY FOR ALUMINUM
TBTEMP,0
TBDATA,1,55000,0
N,1                                  ! GENERATE NODES AND ELEMENTS FOR PIPE288
N,2,,,10
MAT,1
SECNUM,3                             ! STEEL (INSIDE) TUBE
E,1,2
MAT,2
SECNUM,4                             ! ALUMINUM (OUTSIDE) TUBE
E,1,2
CSYS,1
N,101,1.9781692                      ! GENERATE NODES AND ELEMENTS FOR SOLID185
N,102,2.4781692
N,103,3.5697185
N,104,4.0697185
N,105,1.9781692,,10
N,106,2.4781692,,10
N,107,3.5697185,,10
N,108,4.0697185,,10
NGEN,2,10,101,108,,,THETA            ! GENERATE 2ND SET OF NODES TO FORM A THETA DEGREE SLICE
NROTAT,101,118,1
TYPE,2
MAT,1                                ! INSIDE (STEEL) TUBE
E,101,102,112,111,105,106,116,115
MAT,2                                ! OUTSIDE (ALUMINUM) TUBE
E,103,104,114,113,107,108,118,117
N,201,2.2281692                      ! GENERATE NODES AND ELEMENTS FOR SHELL181
N,203,2.2281692,,10
N,202,3.8197185
N,204,3.8197185,,10
NGEN,2,4,201,204,,,THETA             ! GENERATE NODES TO FORM A THETA DEGREE SLICE
TYPE,3
SECNUM,1                             ! INSIDE (STEEL) TUBE
E,203,201,205,207
SECNUM,2                             ! OUTSIDE (ALUMINUM) TUBE
E,204,202,206,208
C*** APPLY CONSTRAINTS TO PIPE288 MODEL
D,1,ALL                              ! FIX ALL DOFS FOR BOTTOM END OF PIPE288
D,2,UX,,,,,UY,ROTX,ROTY,ROTZ         ! ALLOW ONLY UZ DOF AT TOP END OF PIPE288 MODEL
C*** APPLY CONSTRAINTS TO SOLID185 AND SHELL181 MODELS
CP,1,UX,101,111,105,115              ! COUPLE NODES AT BOUNDARY IN RADIAL DIR FOR SOLID185
CPSGEN,4,,1
CP,5,UX,201,205,203,20               ! COUPLE NODES AT BOUNDARY IN RADIAL DIR FOR SHELL181
CPSGEN,2,,5
CP,7,ROTY,201,205                    ! COUPLE NODES AT BOUNDARY IN ROTY DIR FOR SHELL181
CPSGEN,4,,7
NSEL,S,NODE,,101,212                 ! SELECT ONLY NODES IN SOLID185 AND SHELL181 MODELS
NSEL,R,LOC,Y,0                       ! SELECT NODES AT THETA = 0 FROM THE SELECTED SET
DSYM,SYMM,Y,1                        ! APPLY SYMMETRY BOUNDARY CONDITIONS
NSEL,S,NODE,,101,212                 ! SELECT ONLY NODES IN SOLID185 AND SHELL181 MODELS
NSEL,R,LOC,Y,THETA                   ! SELECT NODES AT THETA FROM THE SELECTED SET
DSYM,SYMM,Y,1                        ! APPLY SYMMETRY BOUNDARY CONDITIONS
NSEL,ALL
NSEL,R,LOC,Z,0                       ! SELECT ONLY NODES AT Z = 0
D,ALL,UZ,0                           ! CONSTRAIN BOTTOM NODES IN Z DIRECTION
NSEL,ALL
FINISH
/SOLU
OUTPR,BASIC,LAST                     ! PRINT BASIC SOLUTION AT END OF LOAD STEP
C*** APPLY DISPLACEMENT LOADS TO ALL MODELS
*CREATE,DISP
NSEL,R,LOC,Z,10                      ! SELECT NODES AT Z = 10 TO APPLY DISPLACEMENT
D,ALL,UZ,ARG1
NSEL,ALL
/OUT,SCRATCH
SOLVE
*END
*USE,DISP,-.032
*USE,DISP,-.05
*USE,DISP,-.1
FINISH
/OUT,
/POST1
C*** CREATE MACRO TO GET RESULTS FOR EACH MODEL
*CREATE,GETLOAD
NSEL,S,NODE,,1,2                    ! SELECT NODES IN PIPE288 MODEL
NSEL,R,LOC,Z,0
/OUT,SCRATCH
FSUM                                ! FZ IS TOTAL LOAD FOR PIPE288 MODEL
*GET,LOAD_288,FSUM,,ITEM,FZ
NSEL,S,NODE,,101,118                ! SELECT NODES IN SOLID185 MODEL
NSEL,R,LOC,Z,0
FSUM
*GET,ZFRC,FSUM,0,ITEM,FZ
LOAD=ZFRC*360/THETA                 ! MULTIPLY BY 360/THETA FOR FULL 360 DEGREE RESULTS
*STATUS,LOAD
LOAD_185 = LOAD
NSEL,S,NODE,,201,212                ! SELECT NODES IN SHELL181 MODEL
NSEL,R,LOC,Z,0
FSUM
/OUT,
*GET,ZFRC,FSUM,0,ITEM,FZ
LOAD=ZFRC*360/THETA                 ! MULTIPLY BY 360/THETA FOR FULL 360 DEGREE RESULTS
*STATUS,LOAD
LOAD_181 = LOAD
*VFILL,VALUE_288(1,1),DATA,1024400,1262000,1262000
*VFILL,VALUE_288(I,2),DATA,ABS(LOAD_288)
*VFILL,VALUE_288(I,3),DATA,ABS(LOAD_288)/(VALUE_288(I,1))
*VFILL,VALUE_185(1,1),DATA,1024400,1262000,1262000
*VFILL,VALUE_185(J,2),DATA,ABS(LOAD_185)
*VFILL,VALUE_185(J,3),DATA,ABS(LOAD_185)/(VALUE_185(J,1))
*VFILL,VALUE_181(1,1),DATA,1024400,1262000,1262000
*VFILL,VALUE_181(K,2),DATA,ABS(LOAD_181)
*VFILL,VALUE_181(K,3),DATA,ABS(LOAD_181)/(VALUE_181(K,1))
*END
C*** GET TOTAL LOAD FOR DISPLACEMENT = 0.032
C*** ---------------------------------------
SET,1,1
I = 1
J = 1
K = 1
*DIM,LABEL,CHAR,3,2
*DIM,VALUE_288,,3,3
*DIM,VALUE_185,,3,3
*DIM,VALUE_181,,3,3
*USE,GETLOAD
C*** GET TOTAL LOAD FOR DISPLACEMENT = 0.05
C*** --------------------------------------
SET,2,1
I = I + 1
J = J + 1
K = K + 1
*USE,GETLOAD
C*** GET TOTAL LOAD FOR DISPLACEMENT = 0.1
C*** -------------------------------------
SET,3,1
I = I +1
J = J + 1
K = K + 1
*USE,GETLOAD
LABEL(1,1) = &#39;LOAD, lb&#39;,&#39;LOAD, lb&#39;,&#39;LOAD, lb&#39;
LABEL(1,2) = &#39; UX=.032&#39;,&#39; UX=0.05&#39;,&#39; UX=0.10&#39;
FINISH
/OUT,vm7,vrt
/COM,------------------- VM7 RESULTS COMPARISON ---------------------
/COM,
/COM,                 |   TARGET   |   Mechanical APDL   |   RATIO
/COM,
/COM,RESULTS FOR PIPE288:
/COM,
*VWRITE,LABEL(1,1),LABEL(1,2),VALUE_288(1,1),VALUE_288(1,2),VALUE_288(1,3)
(1X,A8,A8,&#39;   &#39;,F10.0,&#39;  &#39;,F14.0,&#39;   &#39;,1F15.3)
/COM,
/COM,RESULTS FOR SOLID185:
/COM,
*VWRITE,LABEL(1,1),LABEL(1,2),VALUE_185(1,1),VALUE_185(1,2),VALUE_185(1,3)
(1X,A8,A8,&#39;   &#39;,F10.0,&#39;  &#39;,F14.0,&#39;   &#39;,1F15.3)
/COM,
/COM,RESULTS FOR SHELL181:
/COM,
*VWRITE,LABEL(1,1),LABEL(1,2),VALUE_181(1,1),VALUE_181(1,2),VALUE_181(1,3)
(1X,A8,A8,&#39;   &#39;,F10.0,&#39;  &#39;,F14.0,&#39;   &#39;,1F15.3)
/COM,
/COM,-----------------------------------------------------------------
/OUT
*LIST,vm7,vrt
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyansys</span>
<span class="n">pyansys</span><span class="o">.</span><span class="n">convert_script</span><span class="p">(</span><span class="s1">&#39;vm7.dat&#39;</span><span class="p">,</span> <span class="s1">&#39;vm7.py&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Translated code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot; Script generated by pyansys version 0.30.1&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">pyansys</span>
<span class="n">ansys</span> <span class="o">=</span> <span class="n">pyansys</span><span class="o">.</span><span class="n">ANSYS</span><span class="p">(</span><span class="s2">&quot;/usr/ansys_inc/v182/ansys/bin/ansys182&quot;</span><span class="p">,</span> <span class="n">loglevel</span><span class="o">=</span><span class="s2">&quot;ERROR&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/COM,ANSYS MEDIA REL. 150 (11/8/2013) REF. VERIF. MANUAL: REL. 150&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/VERIFY,VM7&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/PREP7&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/TITLE, VM7, PLASTIC COMPRESSION OF A PIPE ASSEMBLY&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;C***          MECHANICS OF SOLIDS, CRANDALL AND DAHL, 1959, PAGE 180, EX. 5.1&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;C***          USING PIPE288, SOLID185 AND SHELL181 ELEMENTS&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;THETA=6                              &quot;</span><span class="p">)</span>  <span class="c1"># SUBTENDED ANGLE</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Et</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;PIPE288&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Et</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;SOLID185&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Et</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;SHELL181&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1">#FULL INTEGRATION</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Sectype</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;SHELL&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Secdata</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>  <span class="c1">#THICKNESS (SHELL181)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Sectype</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;SHELL&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Secdata</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>  <span class="c1">#THICKNESS (SHELL181)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Sectype</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;PIPE&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Secdata</span><span class="p">(</span><span class="mf">4.9563384</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>  <span class="c1">#OUTSIDE DIA. AND WALL THICKNESS FOR INSIDE TUBE (PIPE288)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Sectype</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;PIPE&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Secdata</span><span class="p">(</span><span class="mf">8.139437</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>  <span class="c1">#OUTSIDE DIA. AND WALL THICKNESS FOR OUTSIDE TUBE (PIPE288)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Mp</span><span class="p">(</span><span class="s2">&quot;EX&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">26.875E6</span><span class="p">)</span>  <span class="c1">#STEEL</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Mp</span><span class="p">(</span><span class="s2">&quot;PRXY&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Mp</span><span class="p">(</span><span class="s2">&quot;EX&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">11E6</span><span class="p">)</span>  <span class="c1">#ALUMINUM</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Mp</span><span class="p">(</span><span class="s2">&quot;PRXY&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Tb</span><span class="p">(</span><span class="s2">&quot;BKIN&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1">#DEFINE NON-LINEAR MATERIAL PROPERTY FOR STEEL</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Tbtemp</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Tbdata</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">86000</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Tb</span><span class="p">(</span><span class="s2">&quot;BKIN&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1">#DEFINE NON-LINEAR MATERIAL PROPERTY FOR ALUMINUM</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Tbtemp</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Tbdata</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">55000</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">N</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1">#GENERATE NODES AND ELEMENTS FOR PIPE288</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">N</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Mat</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Secnum</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1">#STEEL (INSIDE) TUBE</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">E</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Mat</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Secnum</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>  <span class="c1">#ALUMINUM (OUTSIDE) TUBE</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">E</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Csys</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">N</span><span class="p">(</span><span class="mi">101</span><span class="p">,</span> <span class="mf">1.9781692</span><span class="p">)</span>  <span class="c1">#GENERATE NODES AND ELEMENTS FOR SOLID185</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">N</span><span class="p">(</span><span class="mi">102</span><span class="p">,</span> <span class="mf">2.4781692</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">N</span><span class="p">(</span><span class="mi">103</span><span class="p">,</span> <span class="mf">3.5697185</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">N</span><span class="p">(</span><span class="mi">104</span><span class="p">,</span> <span class="mf">4.0697185</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">N</span><span class="p">(</span><span class="mi">105</span><span class="p">,</span> <span class="mf">1.9781692</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">N</span><span class="p">(</span><span class="mi">106</span><span class="p">,</span> <span class="mf">2.4781692</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">N</span><span class="p">(</span><span class="mi">107</span><span class="p">,</span> <span class="mf">3.5697185</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">N</span><span class="p">(</span><span class="mi">108</span><span class="p">,</span> <span class="mf">4.0697185</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Ngen</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">108</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;THETA&quot;</span><span class="p">)</span>  <span class="c1">#GENERATE 2ND SET OF NODES TO FORM A THETA DEGREE SLICE</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Nrotat</span><span class="p">(</span><span class="mi">101</span><span class="p">,</span> <span class="mi">118</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Type</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Mat</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1">#INSIDE (STEEL) TUBE</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">E</span><span class="p">(</span><span class="mi">101</span><span class="p">,</span> <span class="mi">102</span><span class="p">,</span> <span class="mi">112</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="mi">105</span><span class="p">,</span> <span class="mi">106</span><span class="p">,</span> <span class="mi">116</span><span class="p">,</span> <span class="mi">115</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Mat</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1">#OUTSIDE (ALUMINUM) TUBE</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">E</span><span class="p">(</span><span class="mi">103</span><span class="p">,</span> <span class="mi">104</span><span class="p">,</span> <span class="mi">114</span><span class="p">,</span> <span class="mi">113</span><span class="p">,</span> <span class="mi">107</span><span class="p">,</span> <span class="mi">108</span><span class="p">,</span> <span class="mi">118</span><span class="p">,</span> <span class="mi">117</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">N</span><span class="p">(</span><span class="mi">201</span><span class="p">,</span> <span class="mf">2.2281692</span><span class="p">)</span>  <span class="c1">#GENERATE NODES AND ELEMENTS FOR SHELL181</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">N</span><span class="p">(</span><span class="mi">203</span><span class="p">,</span> <span class="mf">2.2281692</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">N</span><span class="p">(</span><span class="mi">202</span><span class="p">,</span> <span class="mf">3.8197185</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">N</span><span class="p">(</span><span class="mi">204</span><span class="p">,</span> <span class="mf">3.8197185</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Ngen</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">201</span><span class="p">,</span> <span class="mi">204</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;THETA&quot;</span><span class="p">)</span>  <span class="c1">#GENERATE NODES TO FORM A THETA DEGREE SLICE</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Type</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Secnum</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1">#INSIDE (STEEL) TUBE</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">E</span><span class="p">(</span><span class="mi">203</span><span class="p">,</span> <span class="mi">201</span><span class="p">,</span> <span class="mi">205</span><span class="p">,</span> <span class="mi">207</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Secnum</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1">#OUTSIDE (ALUMINUM) TUBE</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">E</span><span class="p">(</span><span class="mi">204</span><span class="p">,</span> <span class="mi">202</span><span class="p">,</span> <span class="mi">206</span><span class="p">,</span> <span class="mi">208</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;C*** APPLY CONSTRAINTS TO PIPE288 MODEL&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">D</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;ALL&quot;</span><span class="p">)</span>  <span class="c1">#FIX ALL DOFS FOR BOTTOM END OF PIPE288</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">D</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;UX&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;UY&quot;</span><span class="p">,</span> <span class="s2">&quot;ROTX&quot;</span><span class="p">,</span> <span class="s2">&quot;ROTY&quot;</span><span class="p">,</span> <span class="s2">&quot;ROTZ&quot;</span><span class="p">)</span>  <span class="c1">#ALLOW ONLY UZ DOF AT TOP END OF PIPE288 MODEL</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;C*** APPLY CONSTRAINTS TO SOLID185 AND SHELL181 MODELS&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Cp</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;UX&quot;</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="mi">105</span><span class="p">,</span> <span class="mi">115</span><span class="p">)</span>  <span class="c1">#COUPLE NODES AT BOUNDARY IN RADIAL DIR FOR SOLID185</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Cpsgen</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Cp</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;UX&quot;</span><span class="p">,</span> <span class="mi">201</span><span class="p">,</span> <span class="mi">205</span><span class="p">,</span> <span class="mi">203</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>  <span class="c1">#COUPLE NODES AT BOUNDARY IN RADIAL DIR FOR SHELL181</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Cpsgen</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Cp</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="s2">&quot;ROTY&quot;</span><span class="p">,</span> <span class="mi">201</span><span class="p">,</span> <span class="mi">205</span><span class="p">)</span>  <span class="c1">#COUPLE NODES AT BOUNDARY IN ROTY DIR FOR SHELL181</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Cpsgen</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Nsel</span><span class="p">(</span><span class="s2">&quot;S&quot;</span><span class="p">,</span> <span class="s2">&quot;NODE&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">212</span><span class="p">)</span>  <span class="c1">#SELECT ONLY NODES IN SOLID185 AND SHELL181 MODELS</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Nsel</span><span class="p">(</span><span class="s2">&quot;R&quot;</span><span class="p">,</span> <span class="s2">&quot;LOC&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1">#SELECT NODES AT THETA = 0 FROM THE SELECTED SET</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Dsym</span><span class="p">(</span><span class="s2">&quot;SYMM&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1">#APPLY SYMMETRY BOUNDARY CONDITIONS</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Nsel</span><span class="p">(</span><span class="s2">&quot;S&quot;</span><span class="p">,</span> <span class="s2">&quot;NODE&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">212</span><span class="p">)</span>  <span class="c1">#SELECT ONLY NODES IN SOLID185 AND SHELL181 MODELS</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Nsel</span><span class="p">(</span><span class="s2">&quot;R&quot;</span><span class="p">,</span> <span class="s2">&quot;LOC&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="s2">&quot;THETA&quot;</span><span class="p">)</span>  <span class="c1">#SELECT NODES AT THETA FROM THE SELECTED SET</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Dsym</span><span class="p">(</span><span class="s2">&quot;SYMM&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1">#APPLY SYMMETRY BOUNDARY CONDITIONS</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Nsel</span><span class="p">(</span><span class="s2">&quot;ALL&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Nsel</span><span class="p">(</span><span class="s2">&quot;R&quot;</span><span class="p">,</span> <span class="s2">&quot;LOC&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1">#SELECT ONLY NODES AT Z = 0</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">D</span><span class="p">(</span><span class="s2">&quot;ALL&quot;</span><span class="p">,</span> <span class="s2">&quot;UZ&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1">#CONSTRAIN BOTTOM NODES IN Z DIRECTION</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Nsel</span><span class="p">(</span><span class="s2">&quot;ALL&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Finish</span><span class="p">()</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/SOLU&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Outpr</span><span class="p">(</span><span class="s2">&quot;BASIC&quot;</span><span class="p">,</span> <span class="s2">&quot;LAST&quot;</span><span class="p">)</span>  <span class="c1">#PRINT BASIC SOLUTION AT END OF LOAD STEP</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;C*** APPLY DISPLACEMENT LOADS TO ALL MODELS&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">DISP</span><span class="p">(</span><span class="n">ARG1</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG2</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG3</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG4</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG5</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG6</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
         <span class="n">ARG7</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG8</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG9</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG10</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG11</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG12</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
         <span class="n">ARG13</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG14</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG15</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG16</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG17</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG18</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Nsel</span><span class="p">(</span><span class="s2">&quot;R&quot;</span><span class="p">,</span> <span class="s2">&quot;LOC&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>  <span class="c1">#SELECT NODES AT Z = 10 TO APPLY DISPLACEMENT</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">D</span><span class="p">(</span><span class="s2">&quot;ALL&quot;</span><span class="p">,</span> <span class="s2">&quot;UZ&quot;</span><span class="p">,</span> <span class="n">ARG1</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Nsel</span><span class="p">(</span><span class="s2">&quot;ALL&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/OUT,SCRATCH&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Solve</span><span class="p">()</span>


<span class="n">DISP</span><span class="p">(</span><span class="o">-.</span><span class="mo">032</span><span class="p">)</span>
<span class="n">DISP</span><span class="p">(</span><span class="o">-.</span><span class="mo">05</span><span class="p">)</span>
<span class="n">DISP</span><span class="p">(</span><span class="o">-.</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Finish</span><span class="p">()</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/OUT,&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/POST1&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;C*** CREATE MACRO TO GET RESULTS FOR EACH MODEL&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">GETLOAD</span><span class="p">(</span><span class="n">ARG1</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG2</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG3</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG4</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG5</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG6</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="n">ARG7</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG8</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG9</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG10</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG11</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG12</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="n">ARG13</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG14</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG15</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG16</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG17</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ARG18</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Nsel</span><span class="p">(</span><span class="s2">&quot;S&quot;</span><span class="p">,</span> <span class="s2">&quot;NODE&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1">#SELECT NODES IN PIPE288 MODEL</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Nsel</span><span class="p">(</span><span class="s2">&quot;R&quot;</span><span class="p">,</span> <span class="s2">&quot;LOC&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/OUT,SCRATCH&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Fsum</span><span class="p">()</span>  <span class="c1">#FZ IS TOTAL LOAD FOR PIPE288 MODEL</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*GET,LOAD_288,FSUM,,ITEM,FZ&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Nsel</span><span class="p">(</span><span class="s2">&quot;S&quot;</span><span class="p">,</span> <span class="s2">&quot;NODE&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">118</span><span class="p">)</span>  <span class="c1">#SELECT NODES IN SOLID185 MODEL</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Nsel</span><span class="p">(</span><span class="s2">&quot;R&quot;</span><span class="p">,</span> <span class="s2">&quot;LOC&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Fsum</span><span class="p">()</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*GET,ZFRC,FSUM,0,ITEM,FZ&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;LOAD=ZFRC*360/THETA                 &quot;</span><span class="p">)</span>  <span class="c1"># MULTIPLY BY 360/THETA FOR FULL 360 DEGREE RESULTS</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*STATUS,LOAD&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;LOAD_185 = LOAD&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Nsel</span><span class="p">(</span><span class="s2">&quot;S&quot;</span><span class="p">,</span> <span class="s2">&quot;NODE&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">201</span><span class="p">,</span> <span class="mi">212</span><span class="p">)</span>  <span class="c1">#SELECT NODES IN SHELL181 MODEL</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Nsel</span><span class="p">(</span><span class="s2">&quot;R&quot;</span><span class="p">,</span> <span class="s2">&quot;LOC&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Fsum</span><span class="p">()</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/OUT,&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*GET,ZFRC,FSUM,0,ITEM,FZ&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;LOAD=ZFRC*360/THETA                 &quot;</span><span class="p">)</span>  <span class="c1"># MULTIPLY BY 360/THETA FOR FULL 360 DEGREE RESULTS</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*STATUS,LOAD&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;LOAD_181 = LOAD&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*VFILL,VALUE_288(1,1),DATA,1024400,1262000,1262000&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*VFILL,VALUE_288(I,2),DATA,ABS(LOAD_288)&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*VFILL,VALUE_288(I,3),DATA,ABS(LOAD_288)/(VALUE_288(I,1))&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*VFILL,VALUE_185(1,1),DATA,1024400,1262000,1262000&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*VFILL,VALUE_185(J,2),DATA,ABS(LOAD_185)&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*VFILL,VALUE_185(J,3),DATA,ABS(LOAD_185)/(VALUE_185(J,1))&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*VFILL,VALUE_181(1,1),DATA,1024400,1262000,1262000&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*VFILL,VALUE_181(K,2),DATA,ABS(LOAD_181)&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*VFILL,VALUE_181(K,3),DATA,ABS(LOAD_181)/(VALUE_181(K,1))&quot;</span><span class="p">)</span>


<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;C*** GET TOTAL LOAD FOR DISPLACEMENT = 0.032&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;C*** ---------------------------------------&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;I = 1&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;J = 1&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;K = 1&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*DIM,LABEL,CHAR,3,2&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*DIM,VALUE_288,,3,3&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*DIM,VALUE_185,,3,3&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*DIM,VALUE_181,,3,3&quot;</span><span class="p">)</span>
<span class="n">GETLOAD</span><span class="p">()</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;C*** GET TOTAL LOAD FOR DISPLACEMENT = 0.05&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;C*** --------------------------------------&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;I = I + 1&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;J = J + 1&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;K = K + 1&quot;</span><span class="p">)</span>
<span class="n">GETLOAD</span><span class="p">()</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;C*** GET TOTAL LOAD FOR DISPLACEMENT = 0.1&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;C*** -------------------------------------&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;I = I +1&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;J = J + 1&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;K = K + 1&quot;</span><span class="p">)</span>
<span class="n">GETLOAD</span><span class="p">()</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;LABEL(1,1) = &#39;LOAD, lb&#39;,&#39;LOAD, lb&#39;,&#39;LOAD, lb&#39;&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;LABEL(1,2) = &#39; UX=.032&#39;,&#39; UX=0.05&#39;,&#39; UX=0.10&#39;&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Finish</span><span class="p">()</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/OUT,vm7,vrt&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/COM,------------------- VM7 RESULTS COMPARISON ---------------------&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/COM,&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/COM,                 |   TARGET   |   Mechanical APDL   |   RATIO&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/COM,&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/COM,RESULTS FOR PIPE288:&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/COM,&quot;</span><span class="p">)</span>
<span class="k">with</span> <span class="n">ansys</span><span class="o">.</span><span class="n">non_interactive</span><span class="p">:</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*VWRITE,LABEL(1,1),LABEL(1,2),VALUE_288(1,1),VALUE_288(1,2),VALUE_288(1,3)&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;(1X,A8,A8,&#39;   &#39;,F10.0,&#39;  &#39;,F14.0,&#39;   &#39;,1F15.3)&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/COM,&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/COM,RESULTS FOR SOLID185:&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/COM,&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*VWRITE,LABEL(1,1),LABEL(1,2),VALUE_185(1,1),VALUE_185(1,2),VALUE_185(1,3)&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;(1X,A8,A8,&#39;   &#39;,F10.0,&#39;  &#39;,F14.0,&#39;   &#39;,1F15.3)&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/COM,&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/COM,RESULTS FOR SHELL181:&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/COM,&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*VWRITE,LABEL(1,1),LABEL(1,2),VALUE_181(1,1),VALUE_181(1,2),VALUE_181(1,3)&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;(1X,A8,A8,&#39;   &#39;,F10.0,&#39;  &#39;,F14.0,&#39;   &#39;,1F15.3)&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/COM,&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/COM,-----------------------------------------------------------------&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;/OUT&quot;</span><span class="p">)</span>
    <span class="n">ansys</span><span class="o">.</span><span class="n">Run</span><span class="p">(</span><span class="s2">&quot;*LIST,vm7,vrt&quot;</span><span class="p">)</span>
<span class="n">ansys</span><span class="o">.</span><span class="n">Exit</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ansys_examples.html" class="btn btn-neutral float-right" title="ANSYS APDL Interactive Control Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ansys_functions.html" class="btn btn-neutral float-left" title="ANSYS Functions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Alex Kaszynski

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>